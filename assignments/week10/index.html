
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Fab Academy documentation site for Antonio de Jesus Anaya Hernandez">
      
      
        <meta name="author" content="Antonio de Jesus Anaya Hernandez">
      
      
        <link rel="canonical" href="http://fabacademy.org/2021/labs/agrilab/students/antonio-anaya/assignments/week10/">
      
      <link rel="icon" href="../../material/school">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>10. Mechanical design / Machine design - Antonio de Jesus Anaya Hernandez - Fab Academy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Montserrat";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="black">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#10-mechanical-design-machine-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Antonio de Jesus Anaya Hernandez - Fab Academy" class="md-header__button md-logo" aria-label="Antonio de Jesus Anaya Hernandez - Fab Academy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3 1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Antonio de Jesus Anaya Hernandez - Fab Academy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              10. Mechanical design / Machine design
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Tips/documentation_tips/" class="md-tabs__link">
        Tips
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../week01/" class="md-tabs__link md-tabs__link--active">
        Assignments
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../projects/final-project/" class="md-tabs__link">
        Projects
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Antonio de Jesus Anaya Hernandez - Fab Academy" class="md-nav__button md-logo" aria-label="Antonio de Jesus Anaya Hernandez - Fab Academy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3 1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82Z"/></svg>

    </a>
    Antonio de Jesus Anaya Hernandez - Fab Academy
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tips
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tips" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tips
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Tips/documentation_tips/" class="md-nav__link">
        Advice for a succesfull documentation process:
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        About me
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/agreement/" class="md-nav__link">
        Student Agreement
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Assignments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Assignments" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Assignments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week01/" class="md-nav__link">
        1. Principles and practices.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week02/" class="md-nav__link">
        	2. Project management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week03/" class="md-nav__link">
        3. Computer Aided Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week04/" class="md-nav__link">
        4. Computer controlled cutting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week05/" class="md-nav__link">
        5. Electronics production
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week06/" class="md-nav__link">
        6. 3D Scanning and printing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week07/" class="md-nav__link">
        7. Electronics design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week08/" class="md-nav__link">
        8. Computer controlled machining
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week09/" class="md-nav__link">
        9. Embedded programming
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          10. Mechanical design / Machine design
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        10. Mechanical design / Machine design
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#idea-generation-and-team-work" class="md-nav__link">
    Idea generation and team work.
  </a>
  
    <nav class="md-nav" aria-label="Idea generation and team work.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pancake-robot" class="md-nav__link">
    Pancake robot:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#work-split" class="md-nav__link">
    Work split
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criteria-to-chose-the-materials-for-the-structure" class="md-nav__link">
    Criteria to chose the materials for the structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#materials-selected" class="md-nav__link">
    Materials selected
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#electronics-setup" class="md-nav__link">
    Electronics setup
  </a>
  
    <nav class="md-nav" aria-label="Electronics setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parts" class="md-nav__link">
    Parts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consumables" class="md-nav__link">
    Consumables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    Tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software" class="md-nav__link">
    Software
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atx-power-supply-setup" class="md-nav__link">
    ATX Power supply setup
  </a>
  
    <nav class="md-nav" aria-label="ATX Power supply setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atx-power-on-jumper" class="md-nav__link">
    ATX Power on jumper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atx-voltage-outputs" class="md-nav__link">
    ATX voltage Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cnc-grbl-arduino-uno-compatible-board" class="md-nav__link">
    CNC GRBL Arduino UNO compatible board
  </a>
  
    <nav class="md-nav" aria-label="CNC GRBL Arduino UNO compatible board">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assembly" class="md-nav__link">
    Assembly
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-drivers" class="md-nav__link">
    Motor drivers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stepper-motors" class="md-nav__link">
    Stepper motors
  </a>
  
    <nav class="md-nav" aria-label="Stepper motors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wiring" class="md-nav__link">
    Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vref-calibration" class="md-nav__link">
    VREF calibration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps-per-millimeter-for-belt-driven-systems" class="md-nav__link">
    Steps per millimeter for belt driven systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wiring-and-connections" class="md-nav__link">
    Wiring and connections
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-setup" class="md-nav__link">
    Software setup
  </a>
  
    <nav class="md-nav" aria-label="Software setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grbl" class="md-nav__link">
    GRBL
  </a>
  
    <nav class="md-nav" aria-label="GRBL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-and-flashing-grbl-using-arduino-ide" class="md-nav__link">
    Compiling and Flashing GRBL using Arduino IDE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiling-and-flashing-using-command-line-tools" class="md-nav__link">
    Compiling and flashing using command line tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-z-axis-homing-routine" class="md-nav__link">
    Disable Z axis homing routine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firmware-configuration" class="md-nav__link">
    Firmware configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcode-testing" class="md-nav__link">
    GCODE testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fusion-360-work-flow" class="md-nav__link">
    Fusion 360 work-flow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#universal-gcode-sender" class="md-nav__link">
    Universal GCODE sender
  </a>
  
    <nav class="md-nav" aria-label="Universal GCODE sender">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instructions-to-install-and-run-ugs-under-linux" class="md-nav__link">
    Instructions to install and run UGS under Linux:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firmware-configuration-wizard" class="md-nav__link">
    Firmware configuration Wizard:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-gcode-files" class="md-nav__link">
    Load  GCODE files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixing-slow-speeds" class="md-nav__link">
    Fixing Slow speeds:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-high-vibration" class="md-nav__link">
    Fixing High vibration:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-stuck-motors" class="md-nav__link">
    Fixing stuck motors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-result" class="md-nav__link">
    Final result
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-outcome" class="md-nav__link">
    Learning outcome
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#files" class="md-nav__link">
    Files
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week11/" class="md-nav__link">
        11. Input devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week12/" class="md-nav__link">
        12. Molding and casting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week13/" class="md-nav__link">
        13. Output Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week14/" class="md-nav__link">
        14. Networking and communications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week15/" class="md-nav__link">
        15. Interface and application programming
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week16/" class="md-nav__link">
        16. Wildcard week
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week17/" class="md-nav__link">
        17. Applications and Implications.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week18/" class="md-nav__link">
        18. Invention, Intellectual Property and Business Models.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../week19/" class="md-nav__link">
        19. Project development.
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Projects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Projects" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Projects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../projects/final-project/" class="md-nav__link">
        Final Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../projects/for_replication/" class="md-nav__link">
        Final project: MILQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#idea-generation-and-team-work" class="md-nav__link">
    Idea generation and team work.
  </a>
  
    <nav class="md-nav" aria-label="Idea generation and team work.">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pancake-robot" class="md-nav__link">
    Pancake robot:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#work-split" class="md-nav__link">
    Work split
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criteria-to-chose-the-materials-for-the-structure" class="md-nav__link">
    Criteria to chose the materials for the structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#materials-selected" class="md-nav__link">
    Materials selected
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#electronics-setup" class="md-nav__link">
    Electronics setup
  </a>
  
    <nav class="md-nav" aria-label="Electronics setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parts" class="md-nav__link">
    Parts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consumables" class="md-nav__link">
    Consumables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools" class="md-nav__link">
    Tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software" class="md-nav__link">
    Software
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atx-power-supply-setup" class="md-nav__link">
    ATX Power supply setup
  </a>
  
    <nav class="md-nav" aria-label="ATX Power supply setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#atx-power-on-jumper" class="md-nav__link">
    ATX Power on jumper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atx-voltage-outputs" class="md-nav__link">
    ATX voltage Outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cnc-grbl-arduino-uno-compatible-board" class="md-nav__link">
    CNC GRBL Arduino UNO compatible board
  </a>
  
    <nav class="md-nav" aria-label="CNC GRBL Arduino UNO compatible board">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assembly" class="md-nav__link">
    Assembly
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motor-drivers" class="md-nav__link">
    Motor drivers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stepper-motors" class="md-nav__link">
    Stepper motors
  </a>
  
    <nav class="md-nav" aria-label="Stepper motors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wiring" class="md-nav__link">
    Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vref-calibration" class="md-nav__link">
    VREF calibration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps-per-millimeter-for-belt-driven-systems" class="md-nav__link">
    Steps per millimeter for belt driven systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wiring-and-connections" class="md-nav__link">
    Wiring and connections
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-setup" class="md-nav__link">
    Software setup
  </a>
  
    <nav class="md-nav" aria-label="Software setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grbl" class="md-nav__link">
    GRBL
  </a>
  
    <nav class="md-nav" aria-label="GRBL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-and-flashing-grbl-using-arduino-ide" class="md-nav__link">
    Compiling and Flashing GRBL using Arduino IDE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compiling-and-flashing-using-command-line-tools" class="md-nav__link">
    Compiling and flashing using command line tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-z-axis-homing-routine" class="md-nav__link">
    Disable Z axis homing routine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firmware-configuration" class="md-nav__link">
    Firmware configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcode-testing" class="md-nav__link">
    GCODE testing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fusion-360-work-flow" class="md-nav__link">
    Fusion 360 work-flow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#universal-gcode-sender" class="md-nav__link">
    Universal GCODE sender
  </a>
  
    <nav class="md-nav" aria-label="Universal GCODE sender">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instructions-to-install-and-run-ugs-under-linux" class="md-nav__link">
    Instructions to install and run UGS under Linux:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#firmware-configuration-wizard" class="md-nav__link">
    Firmware configuration Wizard:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-gcode-files" class="md-nav__link">
    Load  GCODE files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixing-slow-speeds" class="md-nav__link">
    Fixing Slow speeds:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-high-vibration" class="md-nav__link">
    Fixing High vibration:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-stuck-motors" class="md-nav__link">
    Fixing stuck motors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-result" class="md-nav__link">
    Final result
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-outcome" class="md-nav__link">
    Learning outcome
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#files" class="md-nav__link">
    Files
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="10-mechanical-design-machine-design">10. Mechanical design / Machine design<a class="headerlink" href="#10-mechanical-design-machine-design" title="Permanent link">&para;</a></h1>
<p><img src="../../images/week10/slide.jpg" alt="hero_01" width=100%/>
<img src="../../images/week10/hero_01.jpg" alt="hero_01" width=48%/>
<img src="../../images/week10/hero_03.jpg" alt="hero_01" width=48%/></p>
<!--iframe width="560" height="315" src="https://www.youtube.com/embed/_DBPXuooTRU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe> -->

<figure class="video_container">
  <video controls="true" allowfullscreen="true" poster="path/to/poster_image.png" width=100% loop>
    <source src="http://fabacademy.org/2021/labs/agrilab/video/week10/demo.mp4" type="video/mp4">
  </video>
</figure>

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>On this week we learn to design and make a machine. We faced different difficulties related to the teamwork, machine motion, electronics and the GCODE. This was a special week since the goal was to design and make a machine working as a team. And we are a very diverse team with different skills and motivations.</p>
<p>The work was divided naturally as things came and were picked by us <a href="http://fabacademy.org/2021/labs/agrilab/students/theo-gautier/assignments/week15">Theo</a>, <a href="http://fabacademy.org/2021/labs/agrilab/students/elina-nguyen-cadoret/assignments/week10">Elina</a> and me.</p>
<p>Theo has the skill to design and make machines quickly, so He took responsibility of the machine frame and material selection.</p>
<p>Our instructors <a href="https://fabacademy.org/2019/labs/sorbonne/students/hanneuse-luc/about/">Luc Hanneuse</a> and <a href="http://fabacademy.org/2020/labs/agrilab/students/florent-lemaire/about/">Florent Lemaire</a> looked ahead to this week and they gave us access to Arduino UNO GRBL boards that I&rsquo;ll explain later on this <a href="#cnc-control-system-assembly-and-configuration">section</a>.</p>
<p>As I&rsquo;ve been working just fine under Electronics and software I&rsquo;ve picked the responsibility of that part of the project.</p>
<p>Elina took responsability of the pumping system and the research of the best pancake recipe for the machine.</p>
<p>One of the challenges on <a href="http://agrilab.unilasalle.fr/">AgriLab</a> under the COVID-19 corfew and restrictions were the complete all this machine design and building process in Thursday, Friday and Monday, between 9am to 5:20pm.</p>
<p>This documentation its separated on multiple sections describing my work process chronologically. This is a resume of the work:</p>
<ul>
<li>The idea and teamwork.</li>
<li>The electronics setup.</li>
<li>GRBL firmware setup.</li>
<li>Machine building.</li>
<li>The GCODE file creation process with Fusion 360.</li>
<li>Testing.</li>
<li>Final result.</li>
<li>Learning outcome.</li>
</ul>
<p>Check the group assignment <a href="http://fabacademy.org/2021/labs/agrilab/group/week10_machine_week/">here</a></p>
<h2 id="idea-generation-and-team-work">Idea generation and team work.<a class="headerlink" href="#idea-generation-and-team-work" title="Permanent link">&para;</a></h2>
<p>We first talked together to explain our ideas and split the work.</p>
<ul>
<li><a href="http://fabacademy.org/2021/labs/agrilab/students/theo-gautier/assignments/week15">Theo&rsquo;s</a> idea: Pancake machine.</li>
<li><a href="http://fabacademy.org/2021/labs/agrilab/students/elina-nguyen-cadoret/assignments/week10">Elina&rsquo;s</a> idea: 3 axis CNC machine.</li>
<li>My idea was to work on someone&rsquo;s else idea. So we agreed to work together to develop Theo&rsquo;s pancake machine.</li>
</ul>
<p>This was the first sketch we made together.</p>
<p><img src="../../images/week10/sketch_01.jpg" alt="sketch_01" width=100%/></p>
<p>Then we explored the available materials and parts in the Lab.</p>
<h4 id="pancake-robot">Pancake robot:<a class="headerlink" href="#pancake-robot" title="Permanent link">&para;</a></h4>
<p><strong>General schematic or diagram</strong></p>
<p><img src="../../images/week10/diagram_toon.jpg" alt="hero_01" width=100%/></p>
<h4 id="work-split">Work split<a class="headerlink" href="#work-split" title="Permanent link">&para;</a></h4>
<ol>
<li>Theo machine design and building</li>
<li>Antonio CNC control system</li>
<li>Elina pumping system and pancake recipe</li>
</ol>
<h4 id="criteria-to-chose-the-materials-for-the-structure">Criteria to chose the materials for the structure<a class="headerlink" href="#criteria-to-chose-the-materials-for-the-structure" title="Permanent link">&para;</a></h4>
<p>This is a list of priorities for the materials we have used for the machine. Although we had to prioritize also time and availability and machining process. The person in charge of the final selections was my team mate <a href="http://fabacademy.org/2021/labs/agrilab/students/theo-gautier/assignments/week15">Theo</a></p>
<ol>
<li>Food safety</li>
<li>Structural strength  </li>
<li>Heat resistance</li>
<li>Quantity</li>
<li>Quickness for building</li>
</ol>
<h4 id="materials-selected">Materials selected<a class="headerlink" href="#materials-selected" title="Permanent link">&para;</a></h4>
<p>After looking at our instructor <a href="https://fabacademy.org/2019/labs/sorbonne/students/hanneuse-luc/about/">Luc</a> Laser machine:</p>
<p><img alt="Laser" src="../../images/week10/luc_01.jpg" /></p>
<p>We got some ideas and after looking of the available quicker machining processes we choose:</p>
<ol>
<li>Plexiglass:<ul>
<li><a href="https://www.plexiglas.com/export/sites/plexiglas/.content/medias/downloads/sheet-docs/SDS-11630-PLEXIGLAS-G-COLORLESS-ACRYLIC-SHEET.pdf">Safety datasheet.</a></li>
<li>This is a transparent plastic material that&rsquo;s food-safe for contact.</li>
<li>We selected Laser cut for machining process.   </li>
</ul>
</li>
<li>MDF wood 6mm thickness:<ul>
<li><a href="https://www.cookstownpanel.com/sites/admin/plugins/elfinder/files/cpc/products/downloads/mdf-data-sheet.pdf">Safety datasheet.</a></li>
<li>This is a material made out of wood fibers, mixed with wax and resins.</li>
<li>Compared to PLexiglass its more suitable for heat resistance, so the parts closed to the source of heat will be made out of it.</li>
<li>Compared to aluminum its cheaper and easy for machining.</li>
</ul>
</li>
<li>Extruded aluminum profile 20x20 mm:<ul>
<li><a href="../../files/week10/profile_alum_2020_datasheet.pdf">Datasheet.</a></li>
<li>This is strongest structural material of our list. For machining it required a big saw machine available in the MechaLab at Agrilab.</li>
<li>It&rsquo;s also the most expensive material.</li>
<li>It brings a lot of structural advantages like the rails that we used for assembly multiple parts of the machine.</li>
</ul>
</li>
</ol>
<h2 id="electronics-setup">Electronics setup<a class="headerlink" href="#electronics-setup" title="Permanent link">&para;</a></h2>
<p>Introduction:</p>
<p>CNC control its a complex task, and there are few options open-sourced and easy to use.</p>
<p><a href="https://github.com/gnea/grbl">GRBL</a> its an Open-source software for hobby CNC control written for the AVR <a href="https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-7810-Automotive-Microcontrollers-ATmega328P_Datasheet.pdf">Atmega328 micro-controllers</a>.</p>
<p>Arduino UNO Boards are based on the AVR Atmega328 micro-controller, so our electronic CNC board kit uses all the capabilities of the software and makes the electronics assemble process easy and accessible for new CNC learners.</p>
<p>The <a href="https://github.com/gnea/grbl">GRBL</a> board we have it&rsquo;s a common one used for CNC machines, like small low power laser cutters, small milling machines and vinyl cutters.</p>
<p>I&rsquo;ll explain more about it later, <a href="#grbl">check it here.</a></p>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h3>
<p>Those are the parts, consumables, tools and software I&rsquo;ve used to accomplish my part of the project.</p>
<h4 id="parts">Parts<a class="headerlink" href="#parts" title="Permanent link">&para;</a></h4>
<p><img src="../../images/week10/parts_01.jpg" alt="parts_01" width=100%/></p>
<p><strong>Click on name to check reference</strong></p>
<table>
<thead>
<tr>
<th>Part</th>
<th>Quantity</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.digikey.fr/product-detail/fr/trinamic-motion-control-gmbh/QSH4218-41-10-035/1460-1075-ND/4843426">NEMA 17 step motors</a></td>
<td>2</td>
</tr>
<tr>
<td><a href="https://blog.protoneer.co.nz/arduino-cnc-shield/">CNC GRBL arduino UNO compatible board</a></td>
<td>1</td>
</tr>
<tr>
<td><a href="https://components101.com/modules/a4988-stepper-motor-driver-module">HR4988 Motor drivers</a></td>
<td>2</td>
</tr>
<tr>
<td><a href="https://sten-eswitch-13110800-production.s3.amazonaws.com/system/asset/product_line/data_sheet/124/MS.pdf">Limit switches</a></td>
<td>2</td>
</tr>
<tr>
<td><a href="https://store.arduino.cc/arduino-uno-rev3">Arduino UNO</a></td>
<td>1</td>
</tr>
<tr>
<td>Connectors for wiring</td>
<td>#</td>
</tr>
<tr>
<td><a href="https://hackaday.com/2016/10/28/not-quite-101-uses-for-an-atx-power-supply/">Recycled ATX power supply</a></td>
<td>1</td>
</tr>
</tbody>
</table>
<h4 id="consumables">Consumables<a class="headerlink" href="#consumables" title="Permanent link">&para;</a></h4>
<p><img src="../../images/week10/wires_01.jpg" alt="consumables_01" width=100%/></p>
<p><img src="../../images/week10/connectors_01.jpg" alt="consumables_01" width=100%/></p>
<ol>
<li>Ribbon wire 4 colors for stepper motors</li>
<li>AWG wire 1669</li>
<li>Connectors &ldquo;Type 1&rdquo;</li>
<li>Connector &ldquo;Type 2&rdquo;</li>
</ol>
<h4 id="tools">Tools<a class="headerlink" href="#tools" title="Permanent link">&para;</a></h4>
<p><img src="../../images/week10/tools_01.jpg" alt="tools_01" width=100%/></p>
<ol>
<li>GST Crimping Tool</li>
<li>Soldering iron</li>
<li>Clippers</li>
<li>Multimeter</li>
<li>Cross screw driver</li>
<li>Wire stripper</li>
</ol>
<h4 id="software">Software<a class="headerlink" href="#software" title="Permanent link">&para;</a></h4>
<ol>
<li><a href="https://www.arduino.cc/en/software">Arduino IDE</a></li>
<li><a href="https://winder.github.io/ugs_website/download/">Universal Gcode sender</a></li>
<li><a href="https://github.com/grbl/grbl">GRBL firmware</a></li>
<li><a href="https://www.autodesk.com/products/fusion-360/overview">Fusion 360</a></li>
</ol>
<p><strong>Instructions for the usage and configurations are detailed in the next steps.</strong></p>
<h3 id="atx-power-supply-setup">ATX Power supply setup<a class="headerlink" href="#atx-power-supply-setup" title="Permanent link">&para;</a></h3>
<p><img src="../../images/week10/atx_01.jpg" alt="atx_01" width=100%/></p>
<p>We checked possible power sources and the most suitable one was this recycled ATX power supply.</p>
<p>In AgriLab there&rsquo;s a large stock of recycled parts and materials.</p>
<h4 id="atx-power-on-jumper">ATX Power on jumper<a class="headerlink" href="#atx-power-on-jumper" title="Permanent link">&para;</a></h4>
<p>To switch on the power supply I added a jumper between the green wire and ground.</p>
<p>Explain more</p>
<ol>
<li>Cut the wires</li>
<li>Connect using an electrical union connector</li>
</ol>
<p><img src="../../images/week10/atx_03.jpg" alt="atx_03" width=48%/>
<img src="../../images/week10/atx_02.jpg" alt="atx_02" width=48%/></p>
<h4 id="atx-voltage-outputs">ATX voltage Outputs<a class="headerlink" href="#atx-voltage-outputs" title="Permanent link">&para;</a></h4>
<p>This is the table with the Voltage and Power of every output in the ATX power supply.</p>
<p><img src="../../images/week10/atx_04.jpg" alt="atx_04" width=100%/></p>
<p><img src="../../images/week10/atx_05.jpg" alt="atx_05" width=100%/></p>
<p>I&rsquo;ve used 3 pairs of 12 Volts based in the power consumption of every component listed here:</p>
<table>
<thead>
<tr>
<th>Part</th>
<th>Voltage</th>
<th>Wire color</th>
<th>Black Ground wire</th>
</tr>
</thead>
<tbody>
<tr>
<td>Arduino UNO board</td>
<td>5 Volts</td>
<td>Red</td>
<td>Yes</td>
</tr>
<tr>
<td>GRBL board</td>
<td>12 Volts</td>
<td>Yellow</td>
<td>Yes</td>
</tr>
<tr>
<td>12 V Red LED</td>
<td>12 Volts</td>
<td>Yellow</td>
<td>Yes</td>
</tr>
<tr>
<td>Peristaltic pump</td>
<td>12 Volts</td>
<td>Yellow</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h3 id="cnc-grbl-arduino-uno-compatible-board">CNC GRBL Arduino UNO compatible board<a class="headerlink" href="#cnc-grbl-arduino-uno-compatible-board" title="Permanent link">&para;</a></h3>
<p>This is the schematic given by the manufacturer. Schematic has some faults in the motor driver silk.</p>
<p><img src="../../images/week10/diagram_01.jpg" alt="schematic_01" width=100%/></p>
<p>characteristics:</p>
<table>
<thead>
<tr>
<th>GRBL</th>
<th>Board</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Operation voltage</td>
<td>12 to 16 V</td>
<td>not regulated, only protected by a fusible</td>
</tr>
<tr>
<td>Axis</td>
<td>3 connectors for XYZ</td>
<td>+1 Clone axis connector</td>
</tr>
<tr>
<td>Limit switches</td>
<td>+-X, +-Y, +- Z</td>
<td></td>
</tr>
<tr>
<td>Spindle control</td>
<td>Enable, Direction, cooling</td>
<td>Also used for laser output control</td>
</tr>
<tr>
<td>Machine override controls</td>
<td>Abort, Hold, Resume</td>
<td></td>
</tr>
<tr>
<td>Emergency stop</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Serial communication pinouts</td>
<td>SDA, SCL, TX RX, RST, 3.3V 5V</td>
<td></td>
</tr>
<tr>
<td>Microstepping configuration jumpers</td>
<td>1/2, 1/4, 1/8, 1/16</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="assembly">Assembly<a class="headerlink" href="#assembly" title="Permanent link">&para;</a></h4>
<p><img src="../../images/week10/cnc_01.jpg" alt="cnc_01" width=100%/></p>
<p>Connect the motor driver boards to the GRBL board sockets. Check the pinout and be sure all the pins coincide correctly.</p>
<h4 id="motor-drivers">Motor drivers<a class="headerlink" href="#motor-drivers" title="Permanent link">&para;</a></h4>
<p><img src="../../images/week10/driver_01.jpg" alt="cnc_01" width=100%/></p>
<p>Characteristic:</p>
<table>
<thead>
<tr>
<th>HR4988 motor driver</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Operation voltage</td>
<td>5 Volts</td>
<td></td>
</tr>
<tr>
<td>Resistance</td>
<td>R100</td>
<td>0.1 Ohms</td>
</tr>
<tr>
<td>Motor Voltage Regulator</td>
<td>Potentiometer for VREF</td>
<td></td>
</tr>
</tbody>
</table>
<p>Pinouts in order:</p>
<table>
<thead>
<tr>
<th>Left</th>
<th>Right</th>
</tr>
</thead>
<tbody>
<tr>
<td>Direction</td>
<td>GND</td>
</tr>
<tr>
<td>Step</td>
<td>VDD</td>
</tr>
<tr>
<td>Sleep</td>
<td>1B</td>
</tr>
<tr>
<td>Reset</td>
<td>1A</td>
</tr>
<tr>
<td>MS3</td>
<td>2A</td>
</tr>
<tr>
<td>MS2</td>
<td>2B</td>
</tr>
<tr>
<td>MS1</td>
<td>GND</td>
</tr>
<tr>
<td>Enable</td>
<td>VMOT</td>
</tr>
</tbody>
</table>
<h3 id="stepper-motors">Stepper motors<a class="headerlink" href="#stepper-motors" title="Permanent link">&para;</a></h3>
<h4 id="wiring">Wiring<a class="headerlink" href="#wiring" title="Permanent link">&para;</a></h4>
<p>The wiring with the stepper motors was confusing and I invested one afternoon to find out the right wiring configuration.</p>
<p>I&rsquo;ve find the correct wiring configuration after looking at this video tutorial in Spanish from <a href="https://youtu.be/bx5XrROhr-E">&ldquo;El Profe García&rdquo;.</a></p>
<p><img alt="wiring_04" src="../../images/week10/wiring_04.jpg" /></p>
<p>On the video I&rsquo;ve learn how to identify the coils inside the step motor. And on this <a href="https://youtu.be/eRcqiVBZPQM">other video form the same channel shows</a> the right pinout connection with a controller board.</p>
<p><img alt="wiring_03" src="../../images/week10/wiring_03.jpg" /></p>
<p>I&rsquo;ve found the solution by looking carefully at driver the controller.</p>
<p>Silk draft:</p>
<p><img alt="schematic_driver" src="../../images/week10/diagram.jpg" /></p>
<p>Silk board: See labels at the right side:</p>
<p><img src="../../images/week10/driver_02.jpg" style="transform:rotate(180deg);"/></p>
<p>Comparison table:</p>
<table>
<thead>
<tr>
<th>Silk board</th>
<th>Silk draft</th>
</tr>
</thead>
<tbody>
<tr>
<td>B2</td>
<td>B2</td>
</tr>
<tr>
<td>A2</td>
<td>B1</td>
</tr>
<tr>
<td>A1</td>
<td>A1</td>
</tr>
<tr>
<td>B1</td>
<td>A2</td>
</tr>
</tbody>
</table>
<p><em>For me it was so confusing to see some documentation showing 2A, 2B, 1A and 1B, and others showing A1, A2, B2, B1.</em></p>
<p>The connector cable has 4 wires of colors, Red, Green, Blue and Black.</p>
<p><img src="../../images/week10/motor_01.jpg" alt="cnc_01" width=100%/></p>
<p><strong>This is the right configuration to punch the connectors to the cable from the motor driver to the stepper motor.</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Motor driver color</th>
<th>Step motor color</th>
</tr>
</thead>
<tbody>
<tr>
<td>B2</td>
<td>Green</td>
<td>Red</td>
</tr>
<tr>
<td>A1</td>
<td>Red</td>
<td>Blue</td>
</tr>
<tr>
<td>A1</td>
<td>Black</td>
<td>Green</td>
</tr>
<tr>
<td>B1</td>
<td>Blue</td>
<td>Black</td>
</tr>
</tbody>
</table>
<h4 id="vref-calibration">VREF calibration<a class="headerlink" href="#vref-calibration" title="Permanent link">&para;</a></h4>
<p>This is an important task to prevent over-heating of the motor drivers, and excessive vibration and over-heating of the step motors.</p>
<p><a href="link">This the motor datasheet provided by the manufacturer</a>
<a href="http://kiloohm.info/smd4-resistor/R100">SMD resistor calculator</a></p>
<p>Calculation:</p>
<table>
<thead>
<tr>
<th>Values</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Current Sense resistance</td>
<td>0.01 Ohms</td>
<td>Rsense</td>
</tr>
<tr>
<td>Rated motor current</td>
<td>1.3 A</td>
<td>RMC</td>
</tr>
<tr>
<td>Safety margin percentage</td>
<td>25 %</td>
<td>SM</td>
</tr>
</tbody>
</table>
<p>I&rsquo;ve found this formula VREF = RMC x 8 x Rsense</p>
<p><img src="../../images/week10/vref_01.jpg" alt="vref_01" width=100%/></p>
<p>Process:</p>
<ol>
<li>Use the multimeter as voltmeter in a scale of less than 5 Volts.</li>
<li>Get a multimeter with a clamp connector in the cathode</li>
<li>Power on the GRBL board</li>
<li>Place the cathode (screw driver) in the VREF potentiometer and the ground probe in the bottom left GND pin.</li>
<li>Turn the potentiometer clockwise to increase and anti-clockwise to decrease the VREF.</li>
</ol>
<p>This method helped me to reduce a crancky noise in the motors and overheating of the driver controller board.
I have tried also to reduce the length of the cables to reduce the noise but this VREF method work fine at the end.</p>
<h4 id="steps-per-millimeter-for-belt-driven-systems">Steps per millimeter for belt driven systems<a class="headerlink" href="#steps-per-millimeter-for-belt-driven-systems" title="Permanent link">&para;</a></h4>
<p>I&rsquo;ve calculated this using this <a href="https://zalophusdokdo.github.io/StepperMotorsCalculator/en/index.html">calulator.</a></p>
<table>
<thead>
<tr>
<th>Data</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Motor step angle</td>
<td>1.8°</td>
</tr>
<tr>
<td>Driven Microstepping</td>
<td>Full step</td>
</tr>
<tr>
<td>Belt pitch</td>
<td>2 mm (GT2)</td>
</tr>
<tr>
<td>Pulley tooth count</td>
<td>20</td>
</tr>
</tbody>
</table>
<p><strong>Result: 5.00</strong></p>
<table>
<thead>
<tr>
<th>Resolution</th>
<th>Teeth</th>
<th>Step angle</th>
<th>Stepping</th>
<th>Belt</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 micron</td>
<td>20</td>
<td>1.8°</td>
<td>Full step</td>
<td>2mm</td>
</tr>
</tbody>
</table>
<h3 id="wiring-and-connections">Wiring and connections<a class="headerlink" href="#wiring-and-connections" title="Permanent link">&para;</a></h3>
<p>Follow this instructions to connect and wire the CNC control system:</p>
<ol>
<li>Connect motor driver boards to the CNC arduino shield
  <img src="../../images/week10/wiring_12.jpg" alt="wiring_12" width=100%/></li>
<li>Connect stepper motors with the correct wiring configuration specified in the stepper motors section.
  <img src="../../images/week10/wiring_13.jpg" alt="vref_01" width=100%/></li>
<li>Connect X and Y limit switches to -X and -Y ports in the board.</li>
<li>Connect power supply yellow and black cables from the ATX power supply.
  <img src="../../images/week10/wiring_14.jpg" alt="vref_01" width=100%/></li>
<li>I&rsquo;ve included a 12 V Red led to give some visual feedback, it&rsquo;s connected by an independent yellow and black wires from the ATX power supply.
  <img src="../../images/week10/wiring_02.jpg" alt="vref_01" width=100%/></li>
</ol>
<h2 id="software-setup">Software setup<a class="headerlink" href="#software-setup" title="Permanent link">&para;</a></h2>
<h3 id="grbl">GRBL<a class="headerlink" href="#grbl" title="Permanent link">&para;</a></h3>
<p>As I mentioned before, <a href="https://github.com/grbl/grbl">GRBL</a> is an Open-Source firmware that runs in Atmega328 based Arduinos for low cost CNC machines. The version I&rsquo;ve used is the v1.1 released in 08/2019.</p>
<p>I&rsquo;ve downloaded the repository using this command:</p>
<div class="codehilite"><pre><span></span><code>git clone https://github.com/grbl/grbl.git
</code></pre></div>

<p>Install requirements for Fedora Linux:</p>
<ul>
<li>Avr gcc compiler</li>
<li>Arduino</li>
</ul>
<div class="codehilite"><pre><span></span><code>sudo dnf install avr-gcc arduino
</code></pre></div>

<p>Once the requirements are installed, the next steps are documented in the <a href="https://github.com/gnea/grbl/wiki/Compiling-Grbl">GRBL repository.</a></p>
<h4 id="compiling-and-flashing-grbl-using-arduino-ide">Compiling and Flashing GRBL using Arduino IDE<a class="headerlink" href="#compiling-and-flashing-grbl-using-arduino-ide" title="Permanent link">&para;</a></h4>
<blockquote>
<p>These instructions were extracted from GRBL documentation <a href="https://github.com/gnea/grbl/wiki/Compiling-Grbl">here:</a></p>
</blockquote>
<ol>
<li>Launch the Arduino IDE</li>
<li>Make sure you are using the most recent version of the Arduino IDE!</li>
<li>Load the <code>grbl folder</code> into the Arduino IDE as a Library.</li>
<li>Click the <code>Sketch</code> drop-down menu, navigate to <code>Include Library</code> and select <code>Add .ZIP Library</code>. The <code>Add .ZIP Library</code> command supports both a .ZIP file or a folder. In our case, there is no <code>.ZIP</code> file.</li>
<li>You can confirm that the library has been added. Click the <code>Sketch</code> drop-down menu again, navigate to <code>Include Library</code>, then scroll to the bottom of the list where you should see <code>grbl</code>.</li>
<li><strong>IMPORTANT:</strong> Select the <code>grbl</code> folder <strong><em>inside</em></strong> the <code>grbl-XXX</code> folder, which <strong>only</strong> contains the source files and an example directory.</li>
<li>If you accidentally select the <code>.zip</code> file or the wrong folder, you will need to navigate to your Arduino library, delete the mistake, and re-do Step 3.</li>
<li>Open the <code>GrblUpload</code> Arduino example.</li>
<li>Click the <code>File</code> down-down menu, navigate to <code>Examples-&gt;Grbl</code>, and select <code>GrblUpload</code>.</li>
<li>Do not alter this example in any way! Grbl does not use any Arduino code. Altering this example may cause the Arduino IDE to reference Arduino code and compiling will fail.</li>
<li>Compile and upload Grbl to your Arduino.</li>
<li>Connect your Arduino Uno to your computer.</li>
<li>Make sure your board is set to the Arduino Uno in the <code>Tool-&gt;Board</code> menu and the serial port is selected correctly in <code>Tool-&gt;Serial Port</code>. (There are some controller boards on ebay that have the Arduino Pro bootloader on it, if you get error messages like &ldquo;avrdude: stk500_getsync() attempt n of 10: not in sync: resp=0x20&rdquo; then choose another board, try Arudino Pro/Pro Mini)</li>
<li>Click the <code>Upload</code>, and Grbl should compile and flash to your Arduino! (Flashing with a programmer also works by using the <code>Upload Using Programmer</code> menu command.)</li>
</ol>
<h4 id="compiling-and-flashing-using-command-line-tools">Compiling and flashing using command line tools<a class="headerlink" href="#compiling-and-flashing-using-command-line-tools" title="Permanent link">&para;</a></h4>
<p><strong>Requirements for Fedora Linux</strong></p>
<p>GRBL repository:</p>
<div class="codehilite"><pre><span></span><code>git clone https://github.com/grbl/grbl.git
</code></pre></div>

<p>AVR-GCC and Arduino core libraries:</p>
<div class="codehilite"><pre><span></span><code>sudo dnf install avr-gcc arduino-core
</code></pre></div>

<p>Make:</p>
<div class="codehilite"><pre><span></span><code>sudo dnf install make
</code></pre></div>

<p><strong>Usage</strong></p>
<p>Go to your local GRBL repository using your terminal by cd <location_of_grbl>, in my case this is:</p>
<div class="codehilite"><pre><span></span><code>cd $HOME/repos/grbl
</code></pre></div>

<p>Then use make to compile the grbl HEX file that&rsquo;s going to be flashed to your Arduino UNO board:</p>
<div class="codehilite"><pre><span></span><code>make clean &amp;&amp; make grbl.hex
</code></pre></div>

<p>If the HEX file is successfully compiled then proceed to flash it to the board by executing:</p>
<div class="codehilite"><pre><span></span><code>avrdude -v -patmega328p -Uflash:w:grbl_v1.1h.20190825.hex:i -carduino -b 115200 -P /dev/ttyACM0
</code></pre></div>

<p>Where:</p>
<ul>
<li>
<p>/dev/ttyACM0 it&rsquo;s the local addres of my Arduino UNO board.</p>
</li>
<li>
<p>-patmega328p it&rsquo;s microprocessor family</p>
</li>
<li>
<p>-Uflash:w:grbl*.hex it&rsquo;s the grbl_file_name.hex you have compiled.</p>
</li>
<li>
<p>b 115200 it&rsquo;s the baudrate speed.</p>
</li>
</ul>
<p>There are different ways to know this value, the easiest one it&rsquo;s this:</p>
<ul>
<li>Execute on the terminal with your board <strong>unplugged</strong>:</li>
</ul>
<script id="asciicast-aK4bM2mC0358HUAwKh2PpuRtb" src="https://asciinema.org/a/aK4bM2mC0358HUAwKh2PpuRtb.js" async></script>

<div class="codehilite"><pre><span></span><code>ls /dev/tty*
</code></pre></div>

<p>Save the output and then execute the same command again, <strong>but with your Arduino board connected</strong>, compare the difference, and the new address it&rsquo;s the one of your Arduino:</p>
<h4 id="disable-z-axis-homing-routine">Disable Z axis homing routine<a class="headerlink" href="#disable-z-axis-homing-routine" title="Permanent link">&para;</a></h4>
<p>After flashing the board, and setting up electronics and power source I tried to configure the homming using <strong>Universal Gcode Sender</strong> but, I got many alarms in the process of trying the limit switches. Remember I&rsquo;m using a 2 axis configuration in hardware but then the GRBL by default expects  Z axis limit switch in the routine.</p>
<p>We need to edit and re-flash the firmware to the board, this are the steps needed:</p>
<p>In the lines 75 and 76 of the <strong>grbl/config.h</strong> file its declared the homing process and as the comments point:</p>
<ul>
<li>
<p>line 75 moves the Z axis which is not existing in our configuration,</p>
</li>
<li>
<p>line 76 moves the XY axis at the same time and rate.</p>
</li>
</ul>
<p>This whole process it&rsquo;s called &ldquo;limit finding&rdquo;:</p>
<p>Edition:</p>
<ul>
<li>
<p>Comment line 75 by adding double slash &ldquo;//&rdquo; at the begging of the line.</p>
</li>
<li>
<p>Edit line 76 by changing &ldquo;HOMING_CYCLE_1&rdquo; to &ldquo;HOMING_CYCLE_0&rdquo;.</p>
</li>
<li>
<p>Save the file, and run the compilation process with Arduino or Linux command tools.</p>
</li>
</ul>
<p>Now the homing cycle starts by moving the X and Y axis and the errors are fixed.</p>
<script id="asciicast-MdI79ftDUjOytR7em4Otg9V2P" src="https://asciinema.org/a/MdI79ftDUjOytR7em4Otg9V2P.js" async></script>

<h4 id="firmware-configuration">Firmware configuration<a class="headerlink" href="#firmware-configuration" title="Permanent link">&para;</a></h4>
<p>The important points of the firmware configuration are:</p>
<ul>
<li>
<p>&ldquo;Report in inches&rdquo;, which means you need to disable it to use millimeters.</p>
</li>
<li>
<p>&ldquo;Homing cycle enabled&rdquo;, this is required since we&rsquo;re using a band-pulley system, and as result the machine is not precise enough to preserve an reliable 0 position.</p>
</li>
<li>
<p>&ldquo;Working area limits&rdquo;:</p>
</li>
<li>X: 310 mm</li>
<li>Y: 290 mm</li>
</ul>
<p>We obtained this measurements by manually measuring the travel length of each axis:</p>
<p>X axis:</p>
<p><img src="../../images/week10/axis_01.jpg" alt="cnc_01" width=100%/></p>
<p>Y axis:</p>
<p><img src="../../images/week10/axis_02.jpg" alt="cnc_01" width=100%/></p>
<p>I&rsquo;ve used UGS to change this configuration and also manually typing the codes in a terminal using serial communication and <a href="https://wiki.emacinc.com/wiki/Getting_Started_With_Minicom">minicom</a>:</p>
<p>Firmware configuration table:</p>
<p>The values like this &ldquo;$0&rdquo; or &ldquo;$23&rdquo; should by typed in the terminal after Serial communication has been established:</p>
<p>OR under Universal GCODE Sender see firmware configuration process <a href="#firmware-configuration-wizard/">here</a>:</p>
<p>This is a recorded session using Minicom for serial communication at 115200 Bauds to /dev/ttyACM0 Arduino UNO with GRBL firmware:</p>
<script id="asciicast-LhgpVgfuGZgr9OGNbMikq4UMo" src="https://asciinema.org/a/LhgpVgfuGZgr9OGNbMikq4UMo.js" async></script>

<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$0</td>
<td>10</td>
<td>Step pulse time</td>
</tr>
<tr>
<td>$1</td>
<td>25</td>
<td>Step idle delay</td>
</tr>
<tr>
<td>$2</td>
<td>0</td>
<td>Step pulse invert</td>
</tr>
<tr>
<td>$3</td>
<td>2</td>
<td>Step direction invert</td>
</tr>
<tr>
<td>$4</td>
<td>0</td>
<td>Invert Step enable pin</td>
</tr>
<tr>
<td>$5</td>
<td>0</td>
<td>Invert limit pins</td>
</tr>
<tr>
<td>$6</td>
<td>0</td>
<td>Invert probe pin</td>
</tr>
<tr>
<td>$10</td>
<td>1</td>
<td>Status report options</td>
</tr>
<tr>
<td>$11</td>
<td>0.010</td>
<td>Junction deviation</td>
</tr>
<tr>
<td>$12</td>
<td>0.020</td>
<td>Arc tolerance</td>
</tr>
<tr>
<td>$13</td>
<td>0</td>
<td>Report in inches</td>
</tr>
<tr>
<td>$20</td>
<td>1</td>
<td>Soft limits enable</td>
</tr>
<tr>
<td>$21</td>
<td>0</td>
<td>Hard limits enable</td>
</tr>
<tr>
<td>$22</td>
<td>1</td>
<td>Homing cycle enable</td>
</tr>
<tr>
<td>$23</td>
<td>7</td>
<td>Homing direction invert</td>
</tr>
<tr>
<td>$24</td>
<td>25.000</td>
<td>Homing locate feed rate</td>
</tr>
<tr>
<td>$25</td>
<td>700.000</td>
<td>Homing search feed rate</td>
</tr>
<tr>
<td>$26</td>
<td>250</td>
<td>Homing switch de-bouncing delay</td>
</tr>
<tr>
<td>$27</td>
<td>1.000</td>
<td>Homing switch pull-off distance</td>
</tr>
<tr>
<td>$30</td>
<td>10000</td>
<td>Maximum spindle speed</td>
</tr>
<tr>
<td>$31</td>
<td>0</td>
<td>Minimum spindle speed</td>
</tr>
<tr>
<td>$32</td>
<td>1</td>
<td>Laser mode enabled</td>
</tr>
<tr>
<td>$100</td>
<td>5.000</td>
<td>X-axis travel resolution</td>
</tr>
<tr>
<td>$101</td>
<td>5.000</td>
<td>Y-axis travel resolution</td>
</tr>
<tr>
<td>$102</td>
<td>5.000</td>
<td>Z-axis travel resolution</td>
</tr>
<tr>
<td>$110</td>
<td>10000.000</td>
<td>X-axis maximum rate</td>
</tr>
<tr>
<td>$111</td>
<td>10000.000</td>
<td>Y-axis maximum rate</td>
</tr>
<tr>
<td>$112</td>
<td>500.000</td>
<td>Z-axis maximum rate</td>
</tr>
<tr>
<td>$120</td>
<td>5000.000</td>
<td>X-axis acceleration</td>
</tr>
<tr>
<td>$121</td>
<td>5000.000</td>
<td>Y-axis acceleration</td>
</tr>
<tr>
<td>$122</td>
<td>10.000</td>
<td>Z-axis acceleration</td>
</tr>
<tr>
<td>$130</td>
<td>310.000</td>
<td>X-axis maximum travel</td>
</tr>
<tr>
<td>$131</td>
<td>290.000</td>
<td>Y-axis maximum travel</td>
</tr>
<tr>
<td>$132</td>
<td>0.000</td>
<td>Z-axis maximum travel</td>
</tr>
</tbody>
</table>
<h4 id="gcode-testing">GCODE testing<a class="headerlink" href="#gcode-testing" title="Permanent link">&para;</a></h4>
<p>I&rsquo;ve the time to test multiple GCODES compatible for this version of GRBL.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>$H</td>
<td>Starts homing cycle</td>
</tr>
<tr>
<td>$G28</td>
<td>Goes to the maximum point</td>
</tr>
<tr>
<td>$G0 X100</td>
<td>Linear movement on X axis by 100 mm</td>
</tr>
<tr>
<td>$G0 Y100</td>
<td>Linear movement on Y axis by 100 mm</td>
</tr>
<tr>
<td>$G0 X100 Y100</td>
<td>Linear movement on X and Y axis by 100 mm</td>
</tr>
<tr>
<td>$G53</td>
<td>Uses absolute coordinates for positioning</td>
</tr>
<tr>
<td>$G27</td>
<td>Uses XY plane</td>
</tr>
</tbody>
</table>
<p>To execute this commands I&rsquo;ve used Universal GCODE Sender:</p>
<figure class="video_container">
  <video controls="true" allowfullscreen="true" poster="path/to/poster_image.png" width=100% loop>
    <source src="../../images/week10/ugs_02.mp4" type="video/mp4">
  </video>
</figure>

<h3 id="fusion-360-work-flow">Fusion 360 work-flow<a class="headerlink" href="#fusion-360-work-flow" title="Permanent link">&para;</a></h3>
<p>I&rsquo;ve used Autodesk&rsquo;s <a href="https://www.autodesk.com/products/fusion-360/overview">Fusion 360</a> to understand how the process of making GCODE works with a familiar software. Although there are other options like <a href="https://laserweb.yurl.ch/">LaserWeb</a></p>
<p>The Design process consisted just in drawing a shape using the sketch tools under the Design environment of Fusion 360.</p>
<p>I&rsquo;ve drafted simple shapes to test the pancake machine this an example of the test we ran on the Pancake Machine:</p>
<ol>
<li>I&rsquo;ve drafted this Nut of 120mm side to side and a inner circle of 70 mm diameter.
  <img src="../../images/week10/fusion_01.jpg" alt="vref_01" width=100%/></li>
<li>I&rsquo;ve made under the &ldquo;Manufacture&rdquo; apart a setup process, selecting the Nut sketch as the working area:
  <img src="../../images/week10/fusion_02.jpg" alt="vref_01" width=100%/></li>
<li>I&rsquo;ve selected as Machine &ldquo;Autodesk Generic Cutting Machine&rdquo;
  <img src="../../images/week10/fusion_03.jpg" alt="vref_01" width=100%/></li>
<li>Then selected the machining process as &ldquo;Cutting&rdquo;:
  <img src="../../images/week10/fusion_04.jpg" alt="vref_01" width=100%/></li>
<li>Then selected &ldquo;2D profile as cutting process&rdquo; in the top bar as shown:
  <img src="../../images/week10/fusion_05.jpg" alt="vref_01" width=100%/></li>
<li>Under the &ldquo;Select Tool&rdquo; apart I&rsquo;ve selected the &ldquo;1- laser cutter&rdquo; option as shown:
  <img src="../../images/week10/fusion_06.jpg" alt="vref_01" width=100%/></li>
<li>Then selected the countours in the sketch as shown:
  <img src="../../images/week10/fusion_07.jpg" alt="vref_01" width=100%/>
  <img src="../../images/week10/fusion_11.jpg" alt="vref_01" width=100%/></li>
<li>Finally setting this parameters:<ul>
<li>offset of 10mm.</li>
<li>retract heigh 5mm.</li>
<li>stock top at 0 mm.
<img src="../../images/week10/fusion_08.jpg" alt="vref_01" width=100%/></li>
</ul>
</li>
<li>
<p>Then under the &ldquo;Inspection menu&rdquo; I&rsquo;ve generated the following GCODE simulation.
<br />
<figure class="video_container">
    <video controls="true" allowfullscreen="true" poster="path/to/poster_image.png" width=100% loop>
    <source src="../../images/week10/fusion_08.mp4" type="video/mp4">
    </video>
  </figure></p>
</li>
<li>
<p>To process the files and output a GCODE File for the machine the process its made as shown:</p>
</li>
<li>Under the &ldquo;inspection apart&rdquo; in the topbar select &ldquo;Post process&rdquo; option:</li>
<li>Then Select &ldquo;Grbl Laser/grbl laser&rdquo; for machine type:
  <img src="../../images/week10/fusion_10.jpg" alt="vref_01" width=100%/></li>
<li>I&rsquo;ve setup the output directory and the program name as <strong>~/Desktop/cake_test_01.nc</strong> :
  <img src="../../images/week10/fusion_12.jpg" alt="vref_01" width=100%/></li>
<li>This the GCODE generated:</li>
</ol>
<div class="codehilite"><pre><span></span><code>%
(cake_test_01)
(Machine)
(  vendor: Autodesk)
(  description: Generic Cutting Machine)
G90 G94
G17
G21

(2D Profile2)
G54
G0 S255 M4
G0 X62.576 Y25.508
G1 X61.576 Y23.776 F1000
G1 X62.447 Y22.268
G1 X131.498
G1 X166.023 Y82.068
G1 X131.498 Y141.868
G1 X62.447
G1 X27.921 Y82.068
G1 X61.576 Y23.776
G1 X63.576
G1 S0
M30
%
</code></pre></div>

<h2 id="universal-gcode-sender">Universal GCODE sender<a class="headerlink" href="#universal-gcode-sender" title="Permanent link">&para;</a></h2>
<p>Extracted from <a href="https://winder.github.io/ugs_website/">Universal GCODE SENDER website</a></p>
<blockquote>
<p>*A full featured gcode platform used for interfacing with advanced CNC controllers like GRBL , TinyG, g2core and Smoothieware. Universal Gcode Sender is a self-contained Java application which includes all external dependencies and can be used on most computers running Windows, MacOSX or Linux. *</p>
</blockquote>
<p>Characteristics:</p>
<ul>
<li>Multiplatform</li>
<li>Written in <a href="https://www.java.com/en/download/help/whatis_java.html">JAVA</a> programming language.</li>
<li>Provides an interface for Serial communication.</li>
<li>Provides tools like Joystick and file input to run GCODE files.</li>
<li>It has a testing tools</li>
<li>The Configuration wizard makes the firmware configuration easier.</li>
</ul>
<p>Overview:</p>
<p><img alt="" src="../../images/week10/ugs_00.jpg" /></p>
<h3 id="instructions-to-install-and-run-ugs-under-linux">Instructions to install and run UGS under Linux:<a class="headerlink" href="#instructions-to-install-and-run-ugs-under-linux" title="Permanent link">&para;</a></h3>
<ul>
<li>Download Universal GCODE sender following this <a href="https://winder.github.io/ugs_website/download/">link</a></li>
<li>Once the files have been downloaded run the installation process depending on your platform.</li>
<li>Install JAVA OpenJDK Runtime for Linux:
    <code>dnf install java-11-openjdk.x86_64</code>
   <em><a href="https://docs.fedoraproject.org/en-US/quick-docs/installing-java/">Follow the instructions on this page for more information about OpenJDK in Fedora Linux</a></em></li>
<li>For Linux I&rsquo;ve only had to extract the ZIP files and run the following command inside the &ldquo;bin&rdquo; directory:
    <code> ./ugsplatform </code></li>
<li>Run Universal GCODE sender and activate the communication with the machine.</li>
<li>I&rsquo;ve identify the GRBL Serial communiction device as <strong>/dev/ttyACM0</strong> automatically with UGS.</li>
<li>Then I&rsquo;ve established serial communication at 115200 bauds.
  <img src="../../images/week10/ugs_04.jpg" alt="vref_01" width=100%/></li>
</ul>
<h3 id="firmware-configuration-wizard">Firmware configuration Wizard:<a class="headerlink" href="#firmware-configuration-wizard" title="Permanent link">&para;</a></h3>
<p>I&rsquo;ve followed the Firmware configuration wizard to setup the values I&rsquo;ve explained under the <a href="#firmware-configuration">Firmware Configuration section</a></p>
<figure class="video_container">
  <video controls="true" allowfullscreen="true" poster="path/to/poster_image.png" width=100% loop>
  <source src="../../images/week10/ugs_01.mp4" type="video/mp4">
  </video>
</figure>

<h3 id="load-gcode-files">Load  GCODE files<a class="headerlink" href="#load-gcode-files" title="Permanent link">&para;</a></h3>
<ul>
<li>Run the HOME cycle:</li>
</ul>
<p><img src="../../images/week10/ugs_03.jpg" alt="vref_01" width=100%/></p>
<ul>
<li>Import the GCODE in &ldquo;File&rdquo; &ndash;&gt; &ldquo;Open&rdquo;</li>
</ul>
<p><img src="../../images/week10/ugs_06.jpg" alt="vref_01" width=100%/></p>
<ul>
<li>Press the &ldquo;Play&rdquo; Button to run the GCODE</li>
</ul>
<p><img src="../../images/week10/ugs_05.jpg" alt="vref_01" width=100%/></p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<h3 id="fixing-slow-speeds">Fixing Slow speeds:<a class="headerlink" href="#fixing-slow-speeds" title="Permanent link">&para;</a></h3>
<p>Change the maximum acceleration on the firmware configuration:</p>
<figure class="video_container">
  <video controls="true" allowfullscreen="true" poster="path/to/poster_image.png" width=100% loop>
    <source src="../../images/week10/demo_02.mp4" type="video/mp4">
  </video>
</figure>

<h3 id="fixing-high-vibration">Fixing High vibration:<a class="headerlink" href="#fixing-high-vibration" title="Permanent link">&para;</a></h3>
<p>Decrease the motor drivers VREF until the vibration gets reduced.</p>
<p>Do this by running a displacement GCODE command like:</p>
<ul>
<li>G00 X100 to debug the X axis</li>
<li>G00 Y100 to debug the Y axis</li>
</ul>
<h3 id="fixing-stuck-motors">Fixing stuck motors<a class="headerlink" href="#fixing-stuck-motors" title="Permanent link">&para;</a></h3>
<ul>
<li>Axis not moving:</li>
</ul>
<p>Check the transmission band, look for any stuck parts or excessive friction.
Adjust the motor drivers VREF increasing the output</p>
<ul>
<li>Motors not changing direction</li>
</ul>
<p>I&rsquo;ve found that the silk labels on the motor drivers are inverted and thus it gets confusing if you try to connect the stepper motors following the schematics.</p>
<p><img src="../../images/week10/diagram.jpg" alt="vref_01" width=100%/></p>
<p><img src="../../images/week10/driver_02.jpg" alt="cnc_01" width=100%/></p>
<h2 id="final-result">Final result<a class="headerlink" href="#final-result" title="Permanent link">&para;</a></h2>
<p>At the end we tested the machine and made some pancakes this video was edited by <a href="http://fabacademy.org/2021/labs/agrilab/students/theo-gautier/assignments/week15">Theo</a>.</p>
<p>The assemble process of the different parts of the project took place while working, the integration and final test took place on Monday.</p>
<p>We iterated two times, the first version of the machine had an independent pumping control for speed flow control with a <a href="http://fabacademy.org/2021/labs/agrilab/students/elina-nguyen-cadoret/assignments/week10/#peristaltic-pump">joystick</a>. while Elina worked on her system and later her introduced tool control to activate and deactivate the peristaltic pump system. With the commnads &ldquo;M03&rdquo; and &ldquo;M04&rdquo;.</p>
<p>This independent Arduino pumping system was later removed.</p>
<figure class="video_container">
  <video controls="true" allowfullscreen="true" poster="path/to/poster_image.png" width=100% loop>
    <source src="http://fabacademy.org/2021/labs/agrilab/video/week10/demo.mp4" type="video/mp4">
  </video>
</figure>

<h2 id="learning-outcome">Learning outcome<a class="headerlink" href="#learning-outcome" title="Permanent link">&para;</a></h2>
<p><strong>For an effective teamwork communication its crucial</strong>, the first two days we had a very good understanding of the tasks and over the last two days communication stopped and so we started facing some misunderstandings between instructors and students.</p>
<p><strong>Its important to mention and keep record of all the modifications we make to others works</strong>, for example on day 3 I spent 4 hours debugging the machine after a modification to the firmware I didn&rsquo;t knew about.</p>
<p>As the task was for 3 days 4 maximum, stress was a factor that limited our integration as teammates but at the end we cope and moved forward to deliver the machine on time.</p>
<p>Design improvements:</p>
<p>Use <a href="https://laserweb.yurl.ch/">Laserweb</a> for user friendly interaction adding a <a href="https://www.raspberrypi.org/">raspberry pi</a> as server and a display in place to have an embed pancake machine system.</p>
<p>We have also discussed to run a machine demo on FabAcademy graduation.</p>
<h2 id="files">Files<a class="headerlink" href="#files" title="Permanent link">&para;</a></h2>
<p><a href="../../files/week10/firmware_cakebot.settings">firmware</a>
<a href="../../files/week10/cake_test_01.nc">test_cake gcode</a>
<a href="../../files/week10/test_cake.f3d">test_cake fusion file</a></p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 6, 2022</span>
      
    
  </small>
</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../week09/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 9. Embedded programming" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              9. Embedded programming
            </div>
          </div>
        </a>
      
      
        
        <a href="../week11/" class="md-footer__link md-footer__link--next" aria-label="Next: 11. Input devices" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              11. Input devices
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2021 Antonio de Jesus Anaya Hernandez - Creative Commons Attribution Non Commercial
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://www.instagram.com/le_anayeau/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.facebook.com/antonio.anayahernande" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/AnayaAntonio4" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/in/antonio-anaya-62586a1a8/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>